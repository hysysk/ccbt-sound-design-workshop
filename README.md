# ひらめく☆サンプラー  
CCBTで行われているワークショップ「**ひらめく☆道場　サウンドデザイン入門**」に関連し、開発されたシステム。  
「ひらめく☆サンプラー」を使うと、パソコンやスマートフォンなどの画面上で録音、再生、ループなどができます。  

<img src="https://github.com/user-attachments/assets/75f6ea16-9248-4586-a417-d515fdca5d17" width="600px">

---

## 開発者向けドキュメント

このプロジェクトは、Webブラウザ上で動作するサンプラーアプリケーションです。
Vite, TypeScript, p5.js, Tone.js を使用して構築されています。

### 技術スタック

*   **ビルドツール**: [Vite](https://vitejs.dev/)
*   **言語**: [TypeScript](https://www.typescriptlang.org/)
*   **クリエイティブコーディング**: [p5.js](https://p5js.org/)
*   **オーディオ処理**: [Tone.js](https://tonejs.github.io/)

### 前提条件

開発を始める前に、以下の環境が整っていることを確認してください。

*   [Node.js](https://nodejs.org/) (推奨: 最新のLTSバージョン)
*   npm (Node.jsに含まれています)

### セットアップ

リポジトリをクローンし、プロジェクトのディレクトリに移動した後、依存関係をインストールします。

```bash
npm install
```

### 開発サーバーの起動

ローカル開発サーバーを起動します。

```bash
npm run dev
```

サーバーが起動すると、コンソールにアクセス用URLが表示されます（例: `http://localhost:5173/`）。
`--host` オプションが有効になっているため、同一ネットワーク内の他のデバイス（スマートフォンやタブレットなど）からもアクセスして動作確認が可能です。

### ビルド

本番環境用にプロジェクトをビルドします。このコマンドを実行すると、TypeScriptの型チェックが行われ、最適化されたファイルが `dist` ディレクトリに出力されます。

```bash
npm run build
```

### デプロイ

GitHub Pages へのデプロイ用スクリプトが用意されています。
以下のコマンドを実行すると、`dist` ディレクトリの内容が `gh-pages` ブランチにプッシュされ、デプロイされます。

```bash
npm run deploy
```

※ `vite.config.js` の `base` 設定が `/ccbt-sound-design-workshop/` となっているため、GitHub Pages のサブディレクトリでの運用が想定されています。

### プロジェクト構造

主要なファイルとディレクトリの構成は以下の通りです。

*   `src/main.ts`: アプリケーションのエントリーポイント。
    *   p5.js のスケッチ初期化 (`p.setup`, `p.draw`)
    *   Tone.js のコンテキスト開始 (`Tone.start`)
    *   マイク入力 (`Tone.UserMedia`) と波形解析 (`Tone.Analyser`) のセットアップ
    *   6つの `AudioBank` インスタンスの生成
*   `src/AudioBank.ts`: サンプラーの各トラック（バンク）を管理するクラス。
    *   **機能**: ファイル読み込み、マイク録音、再生、ループ再生、録音データのダウンロード
    *   **UI**: 録音・再生・ループ・ダウンロードボタンの描画とインタラクション判定
*   `src/style.css`: アプリケーション全体のスタイル定義。
*   `public/`: 静的アセット（アイコン画像など）。

### ライセンス

このプロジェクトは [MIT License](./LICENSE) の下で公開されています。
